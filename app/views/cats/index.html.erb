<h1>Listing cats</h1>
<%= link_to "create new cat", register_path %>
<% if @loggedCat %>
  <h2>You are logged as <%= @loggedCat.name %> the Cat</h2>
  <%= link_to "Log cat out", logout_path, method: :delete %>
<% else %>
<%= render :partial => '/login/login' %>
<% end %>

<% if flash.any? %>
  <ul>
    <% flash.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>
<% end %>

<h2>Gato Amigo e Invitado</h2>
  <h3 id="gato__amigo"></h3>
<hr>

<% cache("test") do %>
  <% if @cat_of_the_month %>
    <h2>Cat with more followers last month</h2>
    <p>
      <%= link_to @cat_of_the_month.name, cat_path(@cat_of_the_month) %>
    </p>
  <% end %>
<% end %>

<table class="table table-striped">
  <% cache do %>
  <thead>
    <tr>
      <th>Avatar</th>
      <th>Name</th>
      <th>Birthday</th>
      <th>Followers count</th>
      <th>Followed by count</th>
      <th>Options</th>
    </tr>
  </thead>
  <% end %>
  <tbody>
    <% @cats.each do |cat| %>
      <tr>
        <% cache(cat) do %>
        <td><%= image_tag cat.avatar.url(:thumb) %></td>
        <td><%= link_to raw(cat.name), cat_path(cat) %></td>
        <td><%= localize_date cat.birthday %></td>
        <td><%= cat.followers.count %></td>
        <td><%= cat.followed_by.count %></td>
        <td><%= link_to "Edit", edit_cat_path(cat) %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @cats %>
